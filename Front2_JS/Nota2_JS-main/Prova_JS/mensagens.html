<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mensagens Recebidas</title>
    <link rel="stylesheet" href="css/default.css" />
  </head>
  <body>
    <div class="page">
      <header>
        <h1 class="cabecalho">Mensagens Recebidas</h1>
      </header>

      <main>
        <table border="1" id="tabela-mensagens">
          <thead>
            <tr>
              <th>Digite seu nome</th>
              <th>Digite seu e-mail</th>
              <th>Digite sua mensagem</th>
            </tr>
          </thead>
          <tbody>
            <!-- MSGS -->
          </tbody>
        </table>
      </main>
    </div>

    <script src="js/jquery-3.6.4.min.js"></script>
    <script src="js/api.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const mensagens = obterMensagens();
        const corpoTabela = document.querySelector("#tabela-mensagens tbody");

        if (mensagens.length === 0) {
          const linha = document.createElement("tr");
          const celula = document.createElement("td");
          celula.colSpan = 3;
          celula.textContent = "Nenhuma mensagem encontrada.";
          linha.appendChild(celula);
          corpoTabela.appendChild(linha);
        } else {
          mensagens.forEach((m) => {
            const linha = document.createElement("tr");

            const celNome = document.createElement("td");
            celNome.textContent = m.nome;
            linha.appendChild(celNome);

            const celEmail = document.createElement("td");
            celEmail.textContent = m.email;
            linha.appendChild(celEmail);

            const celMsg = document.createElement("td");
            celMsg.textContent = m.mensagem;
            linha.appendChild(celMsg);

            corpoTabela.appendChild(linha);
          });
        }
      });
    </script>
  </body>
</html>
